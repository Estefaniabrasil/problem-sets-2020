---
title: "ML4econ Prerequisite"
author: "Dor Goldenberg"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    code_folding: hide
    theme: flatly
    highlight: haddock 
    toc: yes
    toc_depth: 4
    toc_float: yes
    keep_md: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(eval = TRUE,
                      echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
```

Hi everyone and welcome to the ml4econ course (stands for Machine Learning for economists)!  

### About the Course
In this course we will go over ML (stands for "machine learning") algorithms that can be used in economics. The first part of the course will focus on some classic models in ML (you are probably familiar with some of them). The second part of the course will focus on causality in ML. Since economics is mostly focused on causality the absence of it from classic ML framework avoids the vast adoption of it by economists. Therefore we will go over some classic ML algorithms and then we will look at some adaptions of them to causal inference framework. 

#### Exercises  
1. ML tools have shown some incredible successes over the last decade in multiple areas. The ML field tackled both novel problems like: Image Processing, Voice Recognition, User Recommendation, Natural Language Processing - and more classic problems like classification and regression problems. Why can't we simply apply those methods to economic issues - policy problems, for examples?
2. Linear Regression model doesn't in itself implies causality. What else needed in order to use the regression coefficients as causal? Why is it not quite easy to get in ML?
3. Due to convenience economists mostly use linear models. Since we are going to use other structural forms let's discuss those assumptions explicitly. This will give us better understanding of the difference between models.  

+ What is the intuitive meaning of the linearity assumption?  

+ What is the intuitive meaning of the separability assumption?  

+ What are the encapsulated meanings in $X \sim \mathcal{N}(\mu,\,\sigma^{2})\,$?

### R
Throughout the course we will be using the `R` programming language both in class and in problem sets. If you are not familiar with it or if you don't have enough experience in programming with `R` than you should probably start in some basic `R` courses. You will find many of them online. You can find some material in the following links:  

1. You can find some introduction[in here](https://www.guru99.com/r-programming-introduction-basics.html).
2. This is a somewhat [Extensive book](http://www.john-ros.com/Rcourse/) on `R` written by Jonathan Rosenblatt from Ben-Gurion University. It covers many topics in `R`, from basics like what is `R` to very advanced topics like parallel computing. 
3. Make sure that you take the [datacamp course](https://www.datacamp.com/courses/introduction-to-the-tidyverse?utm_source=adwords_ppc&utm_campaignid=9039963993&utm_adgroupid=92159846780&utm_device=c&utm_keyword=r%20basics&utm_matchtype=e&utm_network=g&utm_adpostion=&utm_creative=255795296110&utm_targetid=aud-299261629654:kwd-310539422068&utm_loc_interest_ms=&utm_loc_physical_ms=1007978&gclid=Cj0KCQiAnL7yBRD3ARIsAJp_oLaMDa2jnueQTJ-37pAVAPQjteahRPlDgNLlRLM2ROs_I449NzRBY64aAntaEALw_wcB). You all got access. 

#### Exercises 
1. If you don't have it yet make sure you install `R`. You can find it [here](https://cran.r-project.org/bin/windows/base/).

### RStudio
RStudio is an "integrated development environment" (IDE) for `R`. IDE "is a software application that provides comprehensive facilities to computer programmers for software development. An IDE normally consists of at least a source code editor, build automation tools and a debugger." [(Wikipedia)](https://en.wikipedia.org/wiki/Integrated_development_environment).

Most of `R` practitioners use RStudio so you can use the same materials to learn the abilities of RStudio. You can find some intro in [here](https://data-flair.training/blogs/rstudio-tutorial/).

#### Exercises 
1. If you don't have it yet make sure you install RStudio. You can find it [here]( https://rstudio.com/products/rstudio/download/#download).

### The "Tidyverse"
The Tidyverse is a bundle of packages (and if you can't recall what a package is you better go back to the former sections) that makes the use of `R` much more easy practically and conceptually. It contains multiple packages that serve multiple ends:  

+ `dplyr` for data manipulation
+ `tidyr` for tidying data
+ `ggplot2` for visualizing data
+ `readr` for reading different sources of data 
+ `stringr` for dealing with regular expressions
+ `lubridate` for dealing with dates

and much more. Since the `tidyverse` covers a lot of topics we can't cover it here. The main package to focus on is the the `dplyr` package. 
The `dplyr` package provides a powerful SQL-like toolkit for data manipulation. 
What are the main functions you should know?

+ `filter`: filters the data by row-wise conditions
+ `select` allows you to select columns from dataframes
+ `group_by` perform operation on defined groups
+ `mutate` creates new columns 
+ `summarise` reduces multiple values down to a single summary

In addition, you should get familiar with `magrittr`'s (another package from the tidyverse) "pipe" operator ` %>% ` - this operator "plucks" the variable before the pipe in the first argument of the following function. 

If you are not familiar with the tidyverse start to traverse [here](https://r4ds.had.co.nz/transform.html) and [here](https://www.tidyverse.org/packages/).

Anothe useful `tidyverse` package is `ggplot2`, THE go-to package to visualize your data in R. The basic philosophy is layers stacking. You can define almost every element in the way you visualize your data. Check [here](https://ggplot2.tidyverse.org/) and [here](http://r-statistics.co/Complete-Ggplot2-Tutorial-Part1-With-R-Code.html) for some more information. 

[Kieran Healy's Data Visualization](https://socviz.co/) e-book is also highly recommended.

#### Exercises
1. Install and load the `tidyverse` and `kableExtra` packages:

```{r message=FALSE}
# install.packages(c("tidyverse", "kableExtra"))

library(tidyverse)  # for wrangling and visualizing data
library(kableExtra) # for fancy tables
```

2. Load the `iris` data by using `data(iris)`. Now do the following set of actions using a `tidy` vocabulary: select the sepal columns and the species' names. Next, calculate the mean of the sepal length per species. Name the column "Average_Sepal_Length". Make sure you are using the pipe operator throughout. 

```{r dplyr}
data(iris)

iris %>% 
  select(c(starts_with("Sepal"), Species)) %>% 
  group_by(Species) %>% 
  summarise(Average_Sepal_Length = mean(Sepal.Length)) %>% 
  kable() %>%
  kable_styling()
```

3. Load the `mtcars` data by using `data(mtcars)`. Now create a graph that plots `hp` on the x-axis and `mpg` on the y-axis. Add trend line in light-blue color, and make the color differ by `cyl` (the number of cylinders).hint: you may want to first set `cyl` as a factor (i.e., a categorial variable).
```{r ggplot2}
data("mtcars")

mtcars %>% 
  mutate(cyl = as_factor(cyl)) %>% 
  ggplot(aes(x = hp, y = mpg, color = cyl)) +
  geom_point()+ 
  geom_smooth(method="lm", size=1)
```


### Git & GitHub

Git is a tool for version control. It allows documentation and reproducibility of your code. Unfortunately, `R` users do not give enough attention to version control, probably due to the non-production nature of their work. (If you want to learn Git read the following [manual](https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control)).  

GitHub is a GUI (Graphical User Interface) for Git. It allows to run all the commands of Git in a graphical way. It also has repositories that help to document and reproduce the work.   

As mentioned, Git is a tool for version control. The basic flow is this: First, as an one time action install Git & Github ([here](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) & [here](https://github.com/)). Then set the configurations. 
When you start a project that you would like to documnent you should initialise a repository in Git - this repository will document the history of your project. How does Git knows what to document? You tell it! Say you did some changes in one of the files (text files, mostly) and you are happy with it. You need to tell Git that you want the file to be a part of the history of your project - you need to `stage` the file and then `commit` all the files that have been staged. Now, Git creates a unique identifier of this commit, it knows how your project was looking like when you commited. 
The commit function opens the door to useful concepts like branching, merging, rebasing etc. but we will not deal with it now. 

Practically, we will use the `usethis` package for using Git from `R`. 

#### Excercises 
1. Configure: Introduce yourself to git. First, install the package `usethis`. Then, load it and use the `use_git_config` function to introduce yourself to git:

```r
# install.packages("usethis")

library(usethis)

use_git_config(
  scope = "project",
  user.name = "Jane",
  user.email = "jane@example.org"
)
```
2. Open a new script, do some changes and save. Now, try to stage and commit.

3. Try to see what changes were made until the lst commit.

Good luck!!

